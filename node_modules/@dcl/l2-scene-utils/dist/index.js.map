{"version":3,"file":"index.js","sources":["../src/matic/RootChainManagerAbi.ts","../src/utils/index.ts","../src/matic/erc20Abi.ts","../src/matic/index.ts"],"sourcesContent":["export default [\n  {\n    anonymous: false,\n    inputs: [\n      {\n        indexed: true,\n        internalType: \"bytes32\",\n        name: \"tokenType\",\n        type: \"bytes32\",\n      },\n      {\n        indexed: true,\n        internalType: \"address\",\n        name: \"predicateAddress\",\n        type: \"address\",\n      },\n    ],\n    name: \"PredicateRegistered\",\n    type: \"event\",\n  },\n  {\n    anonymous: false,\n    inputs: [\n      { indexed: true, internalType: \"bytes32\", name: \"role\", type: \"bytes32\" },\n      {\n        indexed: true,\n        internalType: \"bytes32\",\n        name: \"previousAdminRole\",\n        type: \"bytes32\",\n      },\n      {\n        indexed: true,\n        internalType: \"bytes32\",\n        name: \"newAdminRole\",\n        type: \"bytes32\",\n      },\n    ],\n    name: \"RoleAdminChanged\",\n    type: \"event\",\n  },\n  {\n    anonymous: false,\n    inputs: [\n      { indexed: true, internalType: \"bytes32\", name: \"role\", type: \"bytes32\" },\n      {\n        indexed: true,\n        internalType: \"address\",\n        name: \"account\",\n        type: \"address\",\n      },\n      {\n        indexed: true,\n        internalType: \"address\",\n        name: \"sender\",\n        type: \"address\",\n      },\n    ],\n    name: \"RoleGranted\",\n    type: \"event\",\n  },\n  {\n    anonymous: false,\n    inputs: [\n      { indexed: true, internalType: \"bytes32\", name: \"role\", type: \"bytes32\" },\n      {\n        indexed: true,\n        internalType: \"address\",\n        name: \"account\",\n        type: \"address\",\n      },\n      {\n        indexed: true,\n        internalType: \"address\",\n        name: \"sender\",\n        type: \"address\",\n      },\n    ],\n    name: \"RoleRevoked\",\n    type: \"event\",\n  },\n  {\n    anonymous: false,\n    inputs: [\n      {\n        indexed: true,\n        internalType: \"address\",\n        name: \"rootToken\",\n        type: \"address\",\n      },\n      {\n        indexed: true,\n        internalType: \"address\",\n        name: \"childToken\",\n        type: \"address\",\n      },\n      {\n        indexed: true,\n        internalType: \"bytes32\",\n        name: \"tokenType\",\n        type: \"bytes32\",\n      },\n    ],\n    name: \"TokenMapped\",\n    type: \"event\",\n  },\n  {\n    inputs: [],\n    name: \"DEFAULT_ADMIN_ROLE\",\n    outputs: [{ internalType: \"bytes32\", name: \"\", type: \"bytes32\" }],\n    stateMutability: \"view\",\n    type: \"function\",\n  },\n  {\n    inputs: [],\n    name: \"DEPOSIT\",\n    outputs: [{ internalType: \"bytes32\", name: \"\", type: \"bytes32\" }],\n    stateMutability: \"view\",\n    type: \"function\",\n  },\n  {\n    inputs: [],\n    name: \"ETHER_ADDRESS\",\n    outputs: [{ internalType: \"address\", name: \"\", type: \"address\" }],\n    stateMutability: \"view\",\n    type: \"function\",\n  },\n  {\n    inputs: [],\n    name: \"MAPPER_ROLE\",\n    outputs: [{ internalType: \"bytes32\", name: \"\", type: \"bytes32\" }],\n    stateMutability: \"view\",\n    type: \"function\",\n  },\n  {\n    inputs: [],\n    name: \"MAP_TOKEN\",\n    outputs: [{ internalType: \"bytes32\", name: \"\", type: \"bytes32\" }],\n    stateMutability: \"view\",\n    type: \"function\",\n  },\n  {\n    inputs: [],\n    name: \"childChainManagerAddress\",\n    outputs: [{ internalType: \"address\", name: \"\", type: \"address\" }],\n    stateMutability: \"view\",\n    type: \"function\",\n  },\n  {\n    inputs: [{ internalType: \"address\", name: \"\", type: \"address\" }],\n    name: \"childToRootToken\",\n    outputs: [{ internalType: \"address\", name: \"\", type: \"address\" }],\n    stateMutability: \"view\",\n    type: \"function\",\n  },\n  {\n    inputs: [{ internalType: \"bytes32\", name: \"role\", type: \"bytes32\" }],\n    name: \"getRoleAdmin\",\n    outputs: [{ internalType: \"bytes32\", name: \"\", type: \"bytes32\" }],\n    stateMutability: \"view\",\n    type: \"function\",\n  },\n  {\n    inputs: [\n      { internalType: \"bytes32\", name: \"role\", type: \"bytes32\" },\n      { internalType: \"uint256\", name: \"index\", type: \"uint256\" },\n    ],\n    name: \"getRoleMember\",\n    outputs: [{ internalType: \"address\", name: \"\", type: \"address\" }],\n    stateMutability: \"view\",\n    type: \"function\",\n  },\n  {\n    inputs: [{ internalType: \"bytes32\", name: \"role\", type: \"bytes32\" }],\n    name: \"getRoleMemberCount\",\n    outputs: [{ internalType: \"uint256\", name: \"\", type: \"uint256\" }],\n    stateMutability: \"view\",\n    type: \"function\",\n  },\n  {\n    inputs: [\n      { internalType: \"bytes32\", name: \"role\", type: \"bytes32\" },\n      { internalType: \"address\", name: \"account\", type: \"address\" },\n    ],\n    name: \"grantRole\",\n    outputs: [],\n    stateMutability: \"nonpayable\",\n    type: \"function\",\n  },\n  {\n    inputs: [\n      { internalType: \"bytes32\", name: \"role\", type: \"bytes32\" },\n      { internalType: \"address\", name: \"account\", type: \"address\" },\n    ],\n    name: \"hasRole\",\n    outputs: [{ internalType: \"bool\", name: \"\", type: \"bool\" }],\n    stateMutability: \"view\",\n    type: \"function\",\n  },\n  {\n    inputs: [{ internalType: \"bytes32\", name: \"\", type: \"bytes32\" }],\n    name: \"processedExits\",\n    outputs: [{ internalType: \"bool\", name: \"\", type: \"bool\" }],\n    stateMutability: \"view\",\n    type: \"function\",\n  },\n  {\n    inputs: [\n      { internalType: \"bytes32\", name: \"role\", type: \"bytes32\" },\n      { internalType: \"address\", name: \"account\", type: \"address\" },\n    ],\n    name: \"renounceRole\",\n    outputs: [],\n    stateMutability: \"nonpayable\",\n    type: \"function\",\n  },\n  {\n    inputs: [\n      { internalType: \"bytes32\", name: \"role\", type: \"bytes32\" },\n      { internalType: \"address\", name: \"account\", type: \"address\" },\n    ],\n    name: \"revokeRole\",\n    outputs: [],\n    stateMutability: \"nonpayable\",\n    type: \"function\",\n  },\n  {\n    inputs: [{ internalType: \"address\", name: \"\", type: \"address\" }],\n    name: \"rootToChildToken\",\n    outputs: [{ internalType: \"address\", name: \"\", type: \"address\" }],\n    stateMutability: \"view\",\n    type: \"function\",\n  },\n  {\n    inputs: [{ internalType: \"address\", name: \"\", type: \"address\" }],\n    name: \"tokenToType\",\n    outputs: [{ internalType: \"bytes32\", name: \"\", type: \"bytes32\" }],\n    stateMutability: \"view\",\n    type: \"function\",\n  },\n  {\n    inputs: [{ internalType: \"bytes32\", name: \"\", type: \"bytes32\" }],\n    name: \"typeToPredicate\",\n    outputs: [{ internalType: \"address\", name: \"\", type: \"address\" }],\n    stateMutability: \"view\",\n    type: \"function\",\n  },\n  { stateMutability: \"payable\", type: \"receive\" },\n  {\n    inputs: [{ internalType: \"address\", name: \"_owner\", type: \"address\" }],\n    name: \"initialize\",\n    outputs: [],\n    stateMutability: \"nonpayable\",\n    type: \"function\",\n  },\n  {\n    inputs: [\n      { internalType: \"address\", name: \"newStateSender\", type: \"address\" },\n    ],\n    name: \"setStateSender\",\n    outputs: [],\n    stateMutability: \"nonpayable\",\n    type: \"function\",\n  },\n  {\n    inputs: [],\n    name: \"stateSenderAddress\",\n    outputs: [{ internalType: \"address\", name: \"\", type: \"address\" }],\n    stateMutability: \"view\",\n    type: \"function\",\n  },\n  {\n    inputs: [\n      {\n        internalType: \"address\",\n        name: \"newCheckpointManager\",\n        type: \"address\",\n      },\n    ],\n    name: \"setCheckpointManager\",\n    outputs: [],\n    stateMutability: \"nonpayable\",\n    type: \"function\",\n  },\n  {\n    inputs: [],\n    name: \"checkpointManagerAddress\",\n    outputs: [{ internalType: \"address\", name: \"\", type: \"address\" }],\n    stateMutability: \"view\",\n    type: \"function\",\n  },\n  {\n    inputs: [\n      {\n        internalType: \"address\",\n        name: \"newChildChainManager\",\n        type: \"address\",\n      },\n    ],\n    name: \"setChildChainManagerAddress\",\n    outputs: [],\n    stateMutability: \"nonpayable\",\n    type: \"function\",\n  },\n  {\n    inputs: [\n      { internalType: \"bytes32\", name: \"tokenType\", type: \"bytes32\" },\n      { internalType: \"address\", name: \"predicateAddress\", type: \"address\" },\n    ],\n    name: \"registerPredicate\",\n    outputs: [],\n    stateMutability: \"nonpayable\",\n    type: \"function\",\n  },\n  {\n    inputs: [\n      { internalType: \"address\", name: \"rootToken\", type: \"address\" },\n      { internalType: \"address\", name: \"childToken\", type: \"address\" },\n      { internalType: \"bytes32\", name: \"tokenType\", type: \"bytes32\" },\n    ],\n    name: \"mapToken\",\n    outputs: [],\n    stateMutability: \"nonpayable\",\n    type: \"function\",\n  },\n  {\n    inputs: [{ internalType: \"address\", name: \"user\", type: \"address\" }],\n    name: \"depositEtherFor\",\n    outputs: [],\n    stateMutability: \"payable\",\n    type: \"function\",\n  },\n  {\n    inputs: [\n      { internalType: \"address\", name: \"user\", type: \"address\" },\n      { internalType: \"address\", name: \"rootToken\", type: \"address\" },\n      { internalType: \"bytes\", name: \"depositData\", type: \"bytes\" },\n    ],\n    name: \"depositFor\",\n    outputs: [],\n    stateMutability: \"nonpayable\",\n    type: \"function\",\n  },\n  {\n    inputs: [{ internalType: \"bytes\", name: \"inputData\", type: \"bytes\" }],\n    name: \"exit\",\n    outputs: [],\n    stateMutability: \"nonpayable\",\n    type: \"function\",\n  },\n];\n","import { Delay } from '@dcl/ecs-scene-utils'\n\nexport function delay(ms: number): Promise<undefined> {\n  return new Promise((resolve, reject) => {\n    const ent = new Entity()\n    engine.addEntity(ent)\n    ent.addComponent(\n      new Delay(ms, () => {\n        resolve()\n        engine.removeEntity(ent)\n      })\n    )\n  })\n}\n\n\nexport function padding(src: string, left = false) {\n  const len = src.length\n  if (len >= 64) return src\n  if (len % 2 != 0) src = '0' + src\n  if (len < 64)\n    while (src.length < 64) {\n      if (left) src += '0'\n      else src = '0' + src\n    }\n  return src\n}","export default [\n  {\n    inputs: [\n      { internalType: 'string', name: 'name_', type: 'string' },\n      { internalType: 'string', name: 'symbol_', type: 'string' },\n    ],\n    stateMutability: 'nonpayable',\n    type: 'constructor',\n  },\n  {\n    anonymous: false,\n    inputs: [\n      {\n        indexed: true,\n        internalType: 'address',\n        name: 'owner',\n        type: 'address',\n      },\n      {\n        indexed: true,\n        internalType: 'address',\n        name: 'spender',\n        type: 'address',\n      },\n      {\n        indexed: false,\n        internalType: 'uint256',\n        name: 'value',\n        type: 'uint256',\n      },\n    ],\n    name: 'Approval',\n    type: 'event',\n  },\n  {\n    anonymous: false,\n    inputs: [\n      {\n        indexed: false,\n        internalType: 'address',\n        name: 'userAddress',\n        type: 'address',\n      },\n      {\n        indexed: false,\n        internalType: 'address payable',\n        name: 'relayerAddress',\n        type: 'address',\n      },\n      {\n        indexed: false,\n        internalType: 'bytes',\n        name: 'functionSignature',\n        type: 'bytes',\n      },\n    ],\n    name: 'MetaTransactionExecuted',\n    type: 'event',\n  },\n  {\n    anonymous: false,\n    inputs: [\n      {\n        indexed: true,\n        internalType: 'address',\n        name: 'from',\n        type: 'address',\n      },\n      { indexed: true, internalType: 'address', name: 'to', type: 'address' },\n      {\n        indexed: false,\n        internalType: 'uint256',\n        name: 'value',\n        type: 'uint256',\n      },\n    ],\n    name: 'Transfer',\n    type: 'event',\n  },\n  {\n    inputs: [],\n    name: 'CHILD_CHAIN_ID',\n    outputs: [{ internalType: 'uint256', name: '', type: 'uint256' }],\n    stateMutability: 'view',\n    type: 'function',\n  },\n  {\n    inputs: [],\n    name: 'CHILD_CHAIN_ID_BYTES',\n    outputs: [{ internalType: 'bytes', name: '', type: 'bytes' }],\n    stateMutability: 'view',\n    type: 'function',\n  },\n  {\n    inputs: [],\n    name: 'ERC712_VERSION',\n    outputs: [{ internalType: 'string', name: '', type: 'string' }],\n    stateMutability: 'view',\n    type: 'function',\n  },\n  {\n    inputs: [],\n    name: 'ROOT_CHAIN_ID',\n    outputs: [{ internalType: 'uint256', name: '', type: 'uint256' }],\n    stateMutability: 'view',\n    type: 'function',\n  },\n  {\n    inputs: [],\n    name: 'ROOT_CHAIN_ID_BYTES',\n    outputs: [{ internalType: 'bytes', name: '', type: 'bytes' }],\n    stateMutability: 'view',\n    type: 'function',\n  },\n  {\n    inputs: [\n      { internalType: 'address', name: 'owner', type: 'address' },\n      { internalType: 'address', name: 'spender', type: 'address' },\n    ],\n    name: 'allowance',\n    outputs: [{ internalType: 'uint256', name: '', type: 'uint256' }],\n    stateMutability: 'view',\n    type: 'function',\n  },\n  {\n    inputs: [\n      { internalType: 'address', name: 'spender', type: 'address' },\n      { internalType: 'uint256', name: 'amount', type: 'uint256' },\n    ],\n    name: 'approve',\n    outputs: [{ internalType: 'bool', name: '', type: 'bool' }],\n    stateMutability: 'nonpayable',\n    type: 'function',\n  },\n  {\n    inputs: [{ internalType: 'address', name: 'account', type: 'address' }],\n    name: 'balanceOf',\n    outputs: [{ internalType: 'uint256', name: '', type: 'uint256' }],\n    stateMutability: 'view',\n    type: 'function',\n  },\n  {\n    inputs: [],\n    name: 'decimals',\n    outputs: [{ internalType: 'uint8', name: '', type: 'uint8' }],\n    stateMutability: 'view',\n    type: 'function',\n  },\n  {\n    inputs: [\n      { internalType: 'address', name: 'spender', type: 'address' },\n      { internalType: 'uint256', name: 'subtractedValue', type: 'uint256' },\n    ],\n    name: 'decreaseAllowance',\n    outputs: [{ internalType: 'bool', name: '', type: 'bool' }],\n    stateMutability: 'nonpayable',\n    type: 'function',\n  },\n  {\n    inputs: [\n      { internalType: 'address', name: 'userAddress', type: 'address' },\n      { internalType: 'bytes', name: 'functionSignature', type: 'bytes' },\n      { internalType: 'bytes32', name: 'sigR', type: 'bytes32' },\n      { internalType: 'bytes32', name: 'sigS', type: 'bytes32' },\n      { internalType: 'uint8', name: 'sigV', type: 'uint8' },\n    ],\n    name: 'executeMetaTransaction',\n    outputs: [{ internalType: 'bytes', name: '', type: 'bytes' }],\n    stateMutability: 'payable',\n    type: 'function',\n  },\n  {\n    inputs: [{ internalType: 'address', name: 'user', type: 'address' }],\n    name: 'getNonce',\n    outputs: [{ internalType: 'uint256', name: 'nonce', type: 'uint256' }],\n    stateMutability: 'view',\n    type: 'function',\n  },\n  {\n    inputs: [\n      { internalType: 'address', name: 'spender', type: 'address' },\n      { internalType: 'uint256', name: 'addedValue', type: 'uint256' },\n    ],\n    name: 'increaseAllowance',\n    outputs: [{ internalType: 'bool', name: '', type: 'bool' }],\n    stateMutability: 'nonpayable',\n    type: 'function',\n  },\n  {\n    inputs: [],\n    name: 'name',\n    outputs: [{ internalType: 'string', name: '', type: 'string' }],\n    stateMutability: 'view',\n    type: 'function',\n  },\n  {\n    inputs: [],\n    name: 'symbol',\n    outputs: [{ internalType: 'string', name: '', type: 'string' }],\n    stateMutability: 'view',\n    type: 'function',\n  },\n  {\n    inputs: [],\n    name: 'totalSupply',\n    outputs: [{ internalType: 'uint256', name: '', type: 'uint256' }],\n    stateMutability: 'view',\n    type: 'function',\n  },\n  {\n    inputs: [\n      { internalType: 'address', name: 'recipient', type: 'address' },\n      { internalType: 'uint256', name: 'amount', type: 'uint256' },\n    ],\n    name: 'transfer',\n    outputs: [{ internalType: 'bool', name: '', type: 'bool' }],\n    stateMutability: 'nonpayable',\n    type: 'function',\n  },\n  {\n    inputs: [\n      { internalType: 'address', name: 'sender', type: 'address' },\n      { internalType: 'address', name: 'recipient', type: 'address' },\n      { internalType: 'uint256', name: 'amount', type: 'uint256' },\n    ],\n    name: 'transferFrom',\n    outputs: [{ internalType: 'bool', name: '', type: 'bool' }],\n    stateMutability: 'nonpayable',\n    type: 'function',\n  },\n  { stateMutability: 'payable', type: 'receive' },\n  {\n    inputs: [{ internalType: 'uint256', name: 'amount', type: 'uint256' }],\n    name: 'mint',\n    outputs: [],\n    stateMutability: 'nonpayable',\n    type: 'function',\n  },\n]\n","import { getUserAccount, RPCSendableMessage } from '@decentraland/EthereumController'\nimport * as eth from 'eth-connect'\nimport RootChainManagerAbi from './RootChainManagerAbi'\nimport { RootChainManager } from './RootChainManager'\nimport { getProvider } from '@decentraland/web3-provider'\nimport { delay, padding } from '../utils/index'\nimport { ERC20Matic } from './erc20'\nimport abi from './erc20Abi'\n\nconst addresses: {\n  [network: string]: {\n    l1Token: string\n    l2Token: string\n    ERC20Predicate: string\n    RootChainManager: string\n  }\n} = {\n  mainnet: {\n    l1Token: '0x0f5d2fb29fb7d3cfee444a200298f468908cc942',\n    l2Token: '0xA1c57f48F0Deb89f569dFbE6E2B7f46D33606fD4',\n    ERC20Predicate: '0x40ec5B33f54e0E8A33A975908C5BA1c14e5BbbDf',\n    RootChainManager: '0xA0c68C638235ee32657e8f720a23ceC1bFc77C77'\n  },\n  goerli: {\n    l1Token: '0xe7fDae84ACaba2A5Ba817B6E6D8A2d415DBFEdbe',\n    l2Token: '0x882Da5967c435eA5cC6b09150d55E8304B838f45',\n    ERC20Predicate: '0xdD6596F2029e6233DEFfaCa316e6A95217d4Dc34',\n    RootChainManager: '0xBbD7cBFA79faee899Eaf900F13C9065bF03B1A74'\n  }\n}\n\nexport function getDomainData(network: string) {\n  const domainData: any = {\n    name: network == 'mainnet' ? '(PoS) Decentraland MANA' : 'Dummy ERC20',\n    version: '1',\n    verifyingContract: addresses[network].l2Token\n  }\n  const domainType = [\n    { name: 'name', type: 'string' },\n    { name: 'version', type: 'string' }\n  ]\n  if (network == 'mainnet') {\n    domainData.salt = '0x' + padStart((137).toString(16), 64, '0')\n\n    domainType.push(\n      { name: 'verifyingContract', type: 'address' },\n      { name: 'salt', type: 'bytes32' }\n    )\n  } else {\n    domainData.chainId = 5\n\n    domainType.push(\n      { name: 'chainId', type: 'uint256' },\n      { name: 'verifyingContract', type: 'address' }\n    )\n  }\n  return [domainData, domainType]\n}\n\n/**\n * Return Contract, Provider and RequestManager\n *\n * @param contractAddress Smartcontract ETH address\n */\nexport async function getContract(\n  contractAddress: eth.Address,\n  requestManager?: eth.RequestManager\n) {\n  if (!requestManager) {\n    const provider = await getProvider()\n    requestManager = new eth.RequestManager(provider)\n  }\n  const factory = new eth.ContractFactory(requestManager, abi)\n  const contract = (await factory.at(contractAddress)) as ERC20Matic\n  return { contract, requestManager }\n}\n\nexport async function balance(address?: string, network: string = 'mainnet') {\n  const fromAddress = address || (await getUserAccount())\n\n  return Promise.all([\n    getContract(addresses[network].l1Token).then(async ({ contract }) => {\n      const balance = await contract.balanceOf(fromAddress)\n      return +eth.fromWei(balance.toString(), 'ether')\n    }),\n    getContract(\n      addresses[network].l2Token,\n      new eth.RequestManager(\n        network == 'mainnet'\n          ? new eth.WebSocketProvider('wss://ws-mainnet.matic.network')\n          : new eth.WebSocketProvider('wss://ws-mumbai.matic.today')\n      )\n    ).then(async ({ contract }) => {\n      const balance = await contract.balanceOf(fromAddress)\n      return +eth.fromWei(balance.toString(), 'ether')\n    })\n  ]).then(v => {\n    return { l1: v[0], l2: v[1] }\n  })\n}\n\nexport async function depositMana(amount: number, network: string = 'mainnet') {\n  const fromAddress = await getUserAccount()\n\n  const { contract, requestManager } = await getContract(addresses[network].l1Token)\n\n  const balance = await contract.balanceOf(fromAddress)\n  if (+eth.fromWei(balance.toString(), 'ether') < amount) return 'Balance too low'\n  const allowance = await contract.allowance(fromAddress, addresses[network].ERC20Predicate)\n  if (+allowance < +eth.toWei(amount, 'ether')) {\n    if (+allowance == 0) {\n      const txId = await contract.approve(\n        addresses[network].ERC20Predicate,\n        +eth.toWei(amount, 'ether'),\n        {\n          from: fromAddress\n        }\n      )\n      let receipt = null\n      while (receipt == null) {\n        await delay(2000)\n        receipt = await requestManager?.eth_getTransactionReceipt(txId.toString())\n      }\n    } else {\n      const txId1 = await contract.approve(addresses[network].ERC20Predicate, 0, {\n        from: fromAddress\n      })\n      let receipt1 = null\n      while (receipt1 == null) {\n        await delay(1000)\n        receipt1 = await requestManager?.eth_getTransactionReceipt(txId1.toString())\n      }\n      const txId2 = await contract.approve(\n        addresses[network].ERC20Predicate,\n        +eth.toWei(amount, 'ether'),\n        {\n          from: fromAddress\n        }\n      )\n      let receipt2 = null\n      while (receipt2 == null) {\n        await delay(1000)\n        receipt2 = await requestManager?.eth_getTransactionReceipt(txId2.toString())\n      }\n    }\n  }\n\n  const factory = new eth.ContractFactory(requestManager, RootChainManagerAbi)\n  const maticContract = (await factory.at(addresses[network].RootChainManager)) as RootChainManager\n\n  await maticContract.depositFor(\n    fromAddress,\n    addresses[network].l1Token,\n    '0x' + padding((+eth.toWei(amount, 'ether')).toString(16), false),\n    { from: fromAddress }\n  )\n}\n\nexport async function sendMana(\n  to: string,\n  amount: number,\n  network: string = 'mainnet'\n) {\n  return new Promise(async (resolve, reject) => {\n    const fromAddress = await getUserAccount()\n\n    const provider = await getProvider()\n    const metamaskRM = new eth.RequestManager(provider)\n\n    await getContract(\n      addresses[network].l2Token,\n      new eth.RequestManager(\n        network == 'mainnet'\n          ? new eth.WebSocketProvider('wss://ws-mainnet.matic.network')\n          : new eth.WebSocketProvider('wss://ws-mumbai.matic.today')\n      )\n    ).then(async ({ contract, requestManager }) => {\n      const balance = await contract.balanceOf(fromAddress)\n      if (+eth.fromWei(balance.toString(), 'ether') < amount) return 'balance too low'\n\n      const [domainData, domainType] = getDomainData(network)\n\n      const metaTransactionType = [\n        { name: 'nonce', type: 'uint256' },\n        { name: 'from', type: 'address' },\n        { name: 'functionSignature', type: 'bytes' }\n      ]\n\n      const functionSignature = `0xa9059cbb000000000000000000000000${to\n        .toLowerCase()\n        .replace('0x', '')}${padding((+eth.toWei(amount, 'ether')).toString(16), false)}`\n\n      let nonce = await contract.getNonce(fromAddress)\n\n      let message = {\n        nonce: nonce,\n        from: fromAddress,\n        functionSignature: functionSignature\n      }\n\n      const dataToSign = JSON.stringify({\n        types: {\n          EIP712Domain: domainType,\n          MetaTransaction: metaTransactionType\n        },\n        domain: domainData,\n        primaryType: 'MetaTransaction',\n        message: message\n      })\n\n      metamaskRM.provider.sendAsync(\n        {\n          method: 'eth_signTypedData_v4',\n          params: [fromAddress, dataToSign],\n          jsonrpc: '2.0',\n          id: 999999999999\n        } as RPCSendableMessage,\n        async (err: any, result: any) => {\n          if (err) {\n            reject(err)\n            return error(err)\n          }\n          const signature = result.result.substring(2)\n          const r = '0x' + signature.substring(0, 64)\n          const s = '0x' + signature.substring(64, 128)\n          const v = '0x' + signature.substring(128, 130)\n\n          await fetch('https://l2.dcl.guru/', {\n            headers: {\n              'content-type': 'application/json'\n            },\n            body: JSON.stringify({\n              mainnet: network == 'mainnet',\n              userAddress: fromAddress,\n              params: [fromAddress, functionSignature, r, s, v]\n            }),\n            method: 'POST'\n          })\n            .then(r => r.json())\n            .then(async r => {\n              const txId = r.txHash\n              let receipt = null\n              while (receipt == null) {\n                await delay(500)\n                receipt = await requestManager?.eth_getTransactionReceipt(txId.toString())\n              }\n              resolve({ receipt, txId })\n            })\n            .catch(e => {\n              reject(e)\n            })\n        }\n      )\n    })\n  })\n}\n\nfunction padStart(str: string, maxLength: number, fillString: string = ' ') {\n  //Return string (STR). This is to make the returned value literal, which is more intuitive in the console\n  if (str.length >= maxLength) return String(str)\n\n  let fillLength = maxLength - str.length,\n    times = Math.ceil(fillLength / fillString.length)\n\n  //What's the name of this algorithm?\n  //Page 30 of the Chinese version of SiCp is applicable to the calculation of power by the same algorithm\n  while ((times >>= 1)) {\n    fillString += fillString\n    if (times === 1) {\n      fillString += fillString\n    }\n  }\n  return fillString.slice(0, fillLength) + str\n}\n"],"names":["anonymous","inputs","indexed","internalType","name","type","outputs","stateMutability","delay","ms","Promise","resolve","reject","ent","Entity","engine","addEntity","addComponent","Delay","removeEntity","padding","src","left","len","length","addresses","mainnet","l1Token","l2Token","ERC20Predicate","RootChainManager","goerli","getDomainData","network","domainData","version","verifyingContract","domainType","salt","str","maxLength","fillString","String","fillLength","times","Math","ceil","slice","padStart","toString","push","chainId","getContract","contractAddress","requestManager","getProvider","provider","_a","eth.RequestManager","eth.ContractFactory","abi","at","contract","address","getUserAccount","_b","fromAddress","all","then","balanceOf","balance","eth.fromWei","eth.WebSocketProvider","v","l1","l2","amount","allowance","eth.toWei","approve","from","txId","receipt","eth_getTransactionReceipt","txId1","receipt1","txId2","receipt2","RootChainManagerAbi","depositFor","to","metamaskRM","_c","__read","metaTransactionType","functionSignature","toLowerCase","replace","getNonce","nonce","message","dataToSign","JSON","stringify","types","EIP712Domain","MetaTransaction","domain","primaryType","sendAsync","method","params","jsonrpc","id","err","result","error","signature","substring","r","s","fetch","headers","content-type","body","userAddress","json","txHash","catch","e"],"mappings":"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"}